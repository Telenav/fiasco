@startuml
'https://plantuml.com/class-diagram

!include lexakai.theme

title "Fiasco"

top to bottom direction

'=============================================
' Dependencies
'=============================================

package fiasco.dependencies
{
    '=============================================
    ' Dependencies
    '=============================================

    interface Dependency
    interface DependencyGraph
    interface Library

    Library -u-|> Dependency
    DependencyGraph "*" o-r- "1" Dependency : "    contains    "

    '=============================================
    ' Artifacts
    '=============================================

    class MavenArtifact
    class MavenGroup
    class Version

    MavenArtifact o-r- Version
    Library "1" o-- "*" MavenArtifact : "excludes"
    Library o-- MavenArtifact : "has"
    MavenGroup "*" o-- "1" MavenArtifact : "contains      "
}

'=============================================
' Tools
'=============================================

package fiasco.tools
{
    interface Tool
}

'=============================================
' Module
'=============================================

package fiasco.module
{
    interface Module

    Module -r-|> Dependency
    Module "1" o-- "*" Module : "depends on"
    Module "1" o---- "*" Tool : "built by"
}

'=============================================
' Projects
'=============================================

package fiasco.project.metadata
{
    interface ProjectMetadata

    class Copyright
    class WebSite
    class License
    class Organization
    class Contributor

    Contributor "1" o-r- "*" Organization : " belongs to "
    ProjectMetadata o-- Copyright
    ProjectMetadata "1" o-l- "*" WebSite : "  documented on  "
    ProjectMetadata "1" o-- "*" Contributor : "developed by"
    ProjectMetadata o-r- Organization : "originated by"
    ProjectMetadata "1" o-- "*" License : "distributed under"
}

package fiasco.project
{
    interface Project

    Project o-- ProjectMetadata : "described by"
}

'=============================================
' Build
'=============================================

package fiasco.build
{
    class Build
    class BuildPlanner

    Build o-r- Project : "is for"
    Build o-- BuildPlanner : "plans build with"
    BuildPlanner ---> DependencyGraph : "uses"
}

package fiasco
{
    class Fiasco

    Fiasco "1" o-d- "*" Build : "executes"
}

package fiasco.build.builders
{
    interface Builder
    interface Buildable

    class ParallelBuilder
    class RemoteBuilder

    Module -u--|> Buildable
    Build -r-> Builder : "    builds with                       "
    ParallelBuilder -u-|> Builder
    RemoteBuilder -u-|> Builder

    Builder "1" o-r- "*" Buildable : "    builds    "
}

'=============================================
' Repository
'=============================================

package fiasco.repository
{
    interface Repository

    class MavenRepository
    MavenRepository -u-|> Repository
    MavenRepository "1" o-- "*" MavenArtifact : "belongs to"
}

'=============================================
' File Tools
'=============================================

package fiasco.tools.file
{
    interface FileTool
    FileTool -u-|> Tool

    class Cleaner
    class Copier
    class ProjectVersionUpdater
    class BuildVersionUpdater
    class JavaPackager

    Cleaner               -u-|> FileTool
    Copier                -u-|> FileTool
    Librarian             -u--|> FileTool
    ProjectVersionUpdater -u--|> FileTool
    BuildVersionUpdater   -u---|> FileTool
    JavaPackager          -u---|> FileTool
}

'=============================================
' JAR and Archive Tools
'=============================================

package fiasco.tools.jar
{
    interface JarTool
    JarTool -u----|> FileTool

    class JarArchiver
    class JarShader
    class JarSigner
    class JarManifestUpdater

    JarArchiver        -u-|> JarTool
    JarShader          -u-|> JarTool
    JarSigner          -u--|> JarTool
    JarManifestUpdater -u--|> JarTool
}

'=============================================
' Compiler Tools
'=============================================

package fiasco.tools.compiler
{
    interface Compiler
    Compiler -u---|> FileTool

    class AntlrCompiler
    class GrpcCompiler
    class JavaCompiler
    class JavadocCompiler
    class LexakaiCompiler
    class ProtobufCompiler

    AntlrCompiler    -u-|> Compiler
    GrpcCompiler     -u-|> Compiler
    JavaCompiler     -u--|> Compiler
    JavadocCompiler  -u--|> Compiler
    LexakaiCompiler  -u---|> Compiler
    ProtobufCompiler -u---|> Compiler
}

'=============================================
' Network Tools
'=============================================

package fiasco.tools.network
{
    interface NetworkTool
    NetworkTool  -u--|> Tool

    class Librarian
    class Publisher
    class Deployer
    class SecureCopy

    Librarian  -u-|> NetworkTool
    Deployer   -u-|> NetworkTool
    Publisher  -u-|> NetworkTool
    SecureCopy -u-|> NetworkTool
}

'=============================================
' Test Tools
'=============================================

package fiasco.tools.test
{
    interface TestTool
    TestTool -u---> Tool

    class JUnit

    JUnit -u-|> TestTool
}

@enduml
